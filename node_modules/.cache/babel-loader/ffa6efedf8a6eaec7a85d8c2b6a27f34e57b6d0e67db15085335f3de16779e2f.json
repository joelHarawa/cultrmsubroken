{"ast":null,"code":"/*\r\nTitle: AuthContext.js\r\nAuthor: Joel Harawa\r\nPurpose: Create context to handle user state for admin and regular users\r\n*/import{createContext,useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext();// Define Authentication Context Provider\nexport const AuthContextProvider=_ref=>{let{children}=_ref;// Initialize user and admin states\nconst[user,setUser]=useState(null);const[admin,setAdmin]=useState(null);const apiUrl='https://18.219.147.241';// Get regular user profile data from backend\nconst getProfile=async()=>{try{const apiUrl='https://18.219.147.241';const token=window.localStorage.getItem(\"jwt\");const response=await axios.post(\"\".concat(apiUrl,\"/api/get/profile\"),{jwt:token});setUser(response.data);}catch(error){console.error(error);}};// Get regular admin profile data from backend\nconst getAdminProfile=async()=>{try{const apiUrl='https://18.219.147.241';const token=window.localStorage.getItem(\"jwt\");const response=await axios.post(\"\".concat(apiUrl,\"/api/get/adminProfile\"),{jwt:token});setAdmin(response.data);}catch(error){console.error(error);}};// Send inputs from user registration page to backend\nconst signup=async inputs=>{const response=await axios.post(\"\".concat(apiUrl,\"/api/auth/signup\"),inputs);};// Send inputs from user login page to backend\nconst login=async inputs=>{const response=await axios.post(\"\".concat(apiUrl,\"/api/auth/login\"),inputs);window.localStorage.setItem(\"jwt\",response.data.message);console.log(response);};// Logout the current user\nconst logout=async inputs=>{setUser(null);};// Send inputs from user registration page to backend\nconst adminSignup=async inputs=>{const response=await axios.post(\"\".concat(apiUrl,\"/api/auth/adminSignup\"),inputs);};// Send inputs from user login page to backend\nconst adminLogin=async inputs=>{const response=await axios.post(\"\".concat(apiUrl,\"/api/auth/adminLogin\"),inputs);window.localStorage.setItem(\"jwt\",response.data.message);console.log(response);};// Logout the current user\nconst adminLogout=async inputs=>{setAdmin(null);};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{adminLogin,adminLogout,adminSignup,login,logout,signup,getProfile,getAdminProfile,user,admin},children:children});};","map":{"version":3,"names":["createContext","useEffect","useState","axios","jsx","_jsx","AuthContext","AuthContextProvider","_ref","children","user","setUser","admin","setAdmin","apiUrl","getProfile","token","window","localStorage","getItem","response","post","concat","jwt","data","error","console","getAdminProfile","signup","inputs","login","setItem","message","log","logout","adminSignup","adminLogin","adminLogout","Provider","value"],"sources":["C:/Users/Joel/VS Code Projects/Cultr/frontend/cultrmsu/src/context/AuthContext.js"],"sourcesContent":["/*\r\nTitle: AuthContext.js\r\nAuthor: Joel Harawa\r\nPurpose: Create context to handle user state for admin and regular users\r\n*/\r\n\r\nimport {createContext, useEffect, useState} from \"react\";\r\nimport axios from \"axios\";\r\nexport const AuthContext = createContext();\r\n\r\n// Define Authentication Context Provider\r\nexport const AuthContextProvider = ({children}) => {\r\n\r\n    // Initialize user and admin states\r\n    const [user, setUser] = useState(null);\r\n    const [admin, setAdmin] = useState(null);\r\n    const apiUrl = 'https://18.219.147.241';\r\n\r\n    // Get regular user profile data from backend\r\n    const getProfile = async () => {\r\n        try {\r\n            const apiUrl = 'https://18.219.147.241';\r\n            const token = window.localStorage.getItem(\"jwt\");\r\n            const response = await axios.post(\r\n                `${apiUrl}/api/get/profile`, {jwt: token}\r\n            );\r\n            setUser(response.data);\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    // Get regular admin profile data from backend\r\n    const getAdminProfile = async () => {\r\n        try {\r\n            const apiUrl = 'https://18.219.147.241';\r\n            const token = window.localStorage.getItem(\"jwt\");\r\n            const response = await axios.post(\r\n                `${apiUrl}/api/get/adminProfile`, {jwt: token}\r\n            );\r\n            setAdmin(response.data);\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    // Send inputs from user registration page to backend\r\n    const signup = async (inputs) => {\r\n        const response = await axios.post(`${apiUrl}/api/auth/signup`, inputs);\r\n    }\r\n\r\n    // Send inputs from user login page to backend\r\n    const login = async (inputs) => {\r\n        const response = await axios.post(`${apiUrl}/api/auth/login`, inputs);\r\n        window.localStorage.setItem(\"jwt\", response.data.message);\r\n        console.log(response);\r\n    }\r\n\r\n    // Logout the current user\r\n    const logout = async (inputs) => {\r\n        setUser(null);\r\n    }\r\n    // Send inputs from user registration page to backend\r\n    const adminSignup = async (inputs) => {\r\n        const response = await axios.post(`${apiUrl}/api/auth/adminSignup`, inputs);\r\n    }\r\n\r\n    // Send inputs from user login page to backend\r\n    const adminLogin = async (inputs) => {\r\n        const response = await axios.post(`${apiUrl}/api/auth/adminLogin`, inputs);\r\n        window.localStorage.setItem(\"jwt\", response.data.message);\r\n        console.log(response);\r\n    }\r\n\r\n    // Logout the current user\r\n    const adminLogout = async (inputs) => {\r\n        setAdmin(null);\r\n    }\r\n\r\n    return (\r\n        <AuthContext.Provider value={{\r\n            adminLogin,\r\n            adminLogout,\r\n            adminSignup,\r\n            login,\r\n            logout,\r\n            signup,\r\n            getProfile,\r\n            getAdminProfile,\r\n            user,\r\n            admin\r\n            }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}